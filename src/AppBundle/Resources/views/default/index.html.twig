{% extends '@App/base.html.twig' %}

{% block body %}
    {% if app.user %}
        <div class="columns is-mobile is-multiline is-centered top-column">
            <div class="column is-narrow">
                <figure class="image is-128x128">
                    <img src="{{ app.user.srcImage }}">
                </figure>
            </div>
            <div class="column is-narrow">
                <p><strong>Display name:</strong> {{ app.user.name }}</p>
                <p><strong>Email:</strong>  {{ app.user.email }}</p>
                <p><strong>Id:</strong>  {{ app.user.username }}</p>
                <p><strong>Type:</strong> {% if app.user.isPremium %} premium {% else %} free {% endif %}</p>
            </div>
        </div>
        <div class="columns has-text-centered">
            <div class="column is-one-third ">
                <h3 class="title">Favourite Artist</h3>
                <p id="favouriteArtist"><i class="fa fa-spinner fa-pulse fa-1x fa-fw"></i></p>
            </div>
            <div class="column is-one-third">
                <h3 class="title">Favourite Track</h3>
                <p id="favouriteTrack"><i class="fa fa-spinner fa-pulse fa-1x fa-fw"></i></p>
            </div>
            <div class="column is-one-third">
                <h3 class="title">Recently Played Track</h3>
                <p id="recentlyPlayedTrack"><i class="fa fa-spinner fa-pulse fa-1x fa-fw"></i></p>
            </div>
        </div>
        <div class="columns has-text-centered">
            <div class="column is-one-third">
                <h3 class="title">Count of Saved Tracks</h3>
                <p>{{ countOfSavedTracks }}</p>
            </div>
            <div class="column">
                <h3 class="title">Favourite Genre</h3>
                <p id="favouriteGenre"><i class="fa fa-spinner fa-pulse fa-1x fa-fw"></i></p>
            </div>
            <div class="column">
                <h3 class="title">Count of Playlists</h3>
                <p>{{ countOfPlaylists }}</p>
            </div>
        </div>
        <div class="columns has-text-centered">
            <div class="column is-one-third">
                <h3 class="title">Type of Account among Users</h3>
                <canvas id="test"></canvas>
            </div>
            <div class="column">
                <h3 class="title">Coming soon</h3>
            </div>
            <div class="column">
                <h3 class="title">Coming soon</h3>
            </div>
        </div>
    {% else %}
    <section class="hero wrap is-fullheight wrap">
        <div class="hero-body">
            <div class="container has-text-centered">
                <div class="column is-half is-offset-one-quarter">
                    <p class="title">
                        Hello dude!
                    </p>
                    <p class="subtitle">
                        If you want to check your stats on Spotify, press button below :)
                    </p>
                    <a class="button is-primary" href="{{ url("hwi_oauth_service_redirect", {service: "spotify"}) }}">
                        <i class="fa fa-spotify spotify-icon" ></i>
                        Login with Spotify
                    </a>
                </div>
            </div>
        </div>
    </section>
    {% endif %}
{% endblock %}


